# 依赖关系映射工具

一个现代化的交互式 Web 应用，用于可视化和分析依赖关系图，支持拓扑排序功能。

![依赖关系映射工具](https://img.shields.io/badge/React-18+-blue) ![TypeScript](https://img.shields.io/badge/TypeScript-5+-blue) ![Vite](https://img.shields.io/badge/Vite-5+-purple)

## ✨ 功能特性

- 📝 **多种输入方式**：直接文本输入、文件导入和导出功能
- 🎨 **交互式可视化**：支持拖拽、缩放和平移依赖关系图
- 🔄 **拓扑排序**：自动解析依赖关系并检测循环依赖
- 📤 **导出功能**：可导出图数据和排序结果
- 🎯 **现代化 UI**：简洁优雅的设计，采用 Tailwind CSS
- ⚡ **高性能**：使用 Vite 构建，开发和构建速度极快

## 🚀 快速开始

### 系统要求

- Node.js 18+ 和 npm

### 安装运行

```bash
# 进入项目目录
cd depender

# 安装依赖（已完成）
npm install

# 启动开发服务器
npm run dev
```

应用将在 `http://localhost:5173` 运行

## 📖 使用指南

### 输入格式

工具使用 YAML 格式定义依赖关系，依赖关系直接定义在节点内部：

```yaml
nodes:
  - id: "1"
    title: "需求分析"
    description: "收集和分析项目需求"
  - id: "2"
    title: "系统设计"
    description: "设计系统架构和接口"
    dependencies:
      - "1"
  - id: "3"
    title: "开发实现"
    description: "编写代码实现功能"
    dependencies:
      - "2"
```

#### 节点属性说明

- `id`: 节点的唯一编号（必需）
- `title`: 节点的标题名称（必需）
- `description`: 节点的简要描述（可选）
- `dependencies`: 当前节点依赖的前置节点 ID 列表（可选）

#### 依赖关系说明

- `dependencies` 数组列出当前节点依赖的所有前置节点
- 例如：节点 "2" 的 `dependencies: ["1"]` 表示节点 2 依赖节点 1
- 支持多个依赖：`dependencies: ["1", "3", "5"]`
- 节点 ID 可以使用数字、字母或组合（如 "14.01", "MATH101"）
- 格式：`源节点 -> 目标节点`
- 也支持 Unicode 箭头：`源节点 → 目标节点`

### 功能说明

#### 1. 直接文本输入

- 在左侧面板中输入或粘贴依赖关系定义
- 实时反映更改
- 提供默认示例快速上手

#### 2. 文件导入

- 点击"导入文件"按钮
- 支持 `.yaml` 和 `.yml` 文件
- 自动解析并可视化内容

#### 3. 交互式图形

- **智能布局**：无循环依赖时自动按拓扑排序层次布局（从左到右）
- **循环检测布局**：检测到循环依赖时使用网格布局
- **缩放**：使用鼠标滚轮或双指手势
- **平移**：点击并拖动背景
- **移动节点**：拖动单个节点重新排列
- **控制栏**：使用屏幕控制进行缩放和适应视图
- **节点信息**：节点显示标题和描述（YAML 格式）

#### 4. 拓扑排序

- 依赖关系变化时自动计算
- 显示遵循所有依赖关系的线性顺序
- **循环检测**：如果存在循环依赖则发出警告
- **扁平化输出**：显示完整的排序序列

#### 5. 导出选项

- **导出排序**：下载拓扑排序结果
- **导出YAML**：下载 YAML 格式的依赖关系定义（保留节点描述）
- **导出文本**：下载简单文本格式的依赖关系定义

## 🛠️ 技术栈

- **前端框架**：React 18 + TypeScript
- **构建工具**：Vite 5
- **图形可视化**：ReactFlow (@xyflow/react)
- **样式**：Tailwind CSS v4
- **算法**：Kahn 拓扑排序（基于 BFS）

## 🧪 开发

### 可用脚本

```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览生产构建
npm run preview

# 代码检查
npm run lint
```

### 生产构建

```bash
npm run build
```

优化后的生产构建将输出到 `dist/` 目录。

## 🎯 算法详解

工具使用 **Kahn 算法** 进行拓扑排序：

1. 计算每个节点的入度
2. 将所有入度为 0 的节点加入队列
3. 处理队列：
   - 从队列中移除节点
   - 添加到排序列表
   - 减少邻居节点的入度
   - 将入度为 0 的邻居加入队列
4. 如果排序列表包含所有节点 → 成功
5. 否则 → 检测到循环

**时间复杂度**：O(V + E)，其中 V = 节点数，E = 边数
**空间复杂度**：O(V + E)

## 📄 许可证

本项目采用 MIT 许可证开源。

## 🙏 致谢

- [ReactFlow](https://reactflow.dev/) - 强大的图形可视化库
- [Tailwind CSS](https://tailwindcss.com/) - 实用优先的 CSS 框架
- [Vite](https://vitejs.dev/) - 下一代前端构建工具

## 💡 使用技巧

1. **快速开始**：使用默认示例了解格式
2. **实时预览**：输入时即时查看图形变化
3. **布局调整**：拖动节点到最佳位置后截图保存
4. **循环检测**：红色警告会立即提示循环依赖
5. **批量处理**：从文件导入大量依赖关系
